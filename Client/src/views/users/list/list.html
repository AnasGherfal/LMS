<v-card class="mx-auto pa-6">
    <v-card-item>
        <v-row>
            <v-card-title class="d-flex align-center">
                {{pageTitle}}
            </v-card-title>
            <v-spacer></v-spacer>
            <v-tooltip text="إضافة مستخدم" v-if="identity.user.roleId == 1">
                <template v-slot:activator="{ props }">
                    <v-btn v-bind="props" color="secondary" variant="outlined" icon="mdi-account-plus-outline" @click="create()" />
                </template>
            </v-tooltip>
        </v-row>
        <v-row>
            <v-col md="3">
                <auto-complete label="الحالة"
                               v-model="filter.status"
                               :items="statusList"
                               @update:modelValue="getAll()">
                </auto-complete>
            </v-col>

            <v-col md="3">
                <text-field label="اسم المستخدم"
                            v-model="filter.name">
                </text-field>
            </v-col>
        </v-row>
    </v-card-item>

    <v-card-text>
        <v-data-table :headers="headers" :items="items">

            <template v-slot:item.status="{ item }">
                <v-chip :color="item.status == 1 ? 'green' : 'red'"
                        :text="item.status == 1 ? 'مفعل' : 'مجمد'"
                        label
                        size="small"></v-chip>
            </template>

            <template v-slot:item.actions="{ item, index }">
                <v-tooltip location="top" v-if="identity.user.roleId == 1">
                    <template v-slot:activator="{ props }">
                        <v-btn icon variant="text" v-bind="props"
                               @click="view(item.id)">
                            <v-icon size="small" color="primary">mdi-eye-outline</v-icon>
                        </v-btn>
                    </template>
                    <span>عرض تفاصيل</span>
                </v-tooltip>

                <v-tooltip location="top" v-if="identity.user.roleId == 1">
                    <template v-slot:activator="{ props }">
                        <v-btn icon variant="text" v-bind="props"
                               @click="showDialog(item.id, 'delete', index)">
                            <v-icon size="small" color="error">mdi-trash-can-outline</v-icon>
                        </v-btn>
                    </template>
                    <span>حذف</span>
                </v-tooltip>
            </template>
        </v-data-table>
        <v-pagination v-model="filter.pageNo"
                      class="my-4"
                      :length="pagesCount"></v-pagination>
    </v-card-text>

    <v-dialog v-model="deleteDialog"
              persistent
              width="600">
        <v-card>
            <v-card-title>
                حذف مستخدم
            </v-card-title>
            <v-card-text>
                <span>هل أنت متأكد من حذف المستخدم</span>
            </v-card-text>
            <v-card-actions>
                <v-spacer></v-spacer>
                <v-btn color="primary"
                       variant="text"
                       @click="deleteUser">
                    حذف
                </v-btn>
                <v-btn color="error"
                       variant="text"
                       @click="canceleDialog()">
                    الغاء
                </v-btn>
            </v-card-actions>
        </v-card>
    </v-dialog>


</v-card>
